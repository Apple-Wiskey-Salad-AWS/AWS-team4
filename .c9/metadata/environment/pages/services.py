{"filter":false,"title":"services.py","tooltip":"/pages/services.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":62,"column":0},"action":"insert","lines":["import streamlit as st","import boto3","import json","","# S3 클라이언트 생성","s3 = boto3.client('s3')","bucket_name = 'newdataa'","","# 기본값 설정","if 'service_page' not in st.session_state:","    st.session_state['service_page'] = None","","# 사이드바에 버튼 추가","if st.sidebar.button('Statistics'):","    st.session_state['service_page'] = 'Statistics'","if st.sidebar.button('Target Materials'):","    st.session_state['service_page'] = 'Target Materials'","if st.sidebar.button('Recent Detection'):","    st.session_state['service_page'] = 'Recent Detection'","","# 선택된 서비스 페이지에 따라 콘텐츠 표시","if st.session_state['service_page'] == 'Statistics':","    st.write(\"## Statistics Page\")","    st.write(\"지금까지 얼마나 잘 detect 했는지, 품목별로 detect율 같은거 뽑아내서 그래프로 그려넣으면 좋을 것 같아요. 설명페이지마냥\")","elif st.session_state['service_page'] == 'Target Materials':","    st.write(\"## Target Materials Page\")","    materials = st.sidebar.multiselect(","        \"detect 할 항목들을 선택해주세요 (ps. 전체를 한번에 자동으로 선택할 수 있도록 하는 기능 넣으면 좋을 듯)\",","        [\"SSD\", \"knife\", \"USB\", \"기타등등\"]","    )","    st.session_state['selected_materials'] = materials  # 선택한 항목들을 세션 상태에 저장","    st.write(\"선택한 규제항목이 맞는지 다시 한번 확인하고 모델 사용하기를 눌러주세요: \", materials)","elif st.session_state['service_page'] == 'Recent Detection':","    st.write(\"## 모델 사용하는 거 보여주기\")","    if 'selected_materials' in st.session_state:","        selected_materials = st.session_state['selected_materials']","        st.write(\"Selected materials for detection: \", selected_materials)","    else:","        st.write(\"No materials selected.\")","    ","    # 동영상 및 이미지 파일 업로드 to S3","    st.write(\"### 동영상 및 이미지 업로드 및 처리\")","    uploaded_file = st.file_uploader(\"Choose a video or image...\", type=[\"mp4\", \"avi\", \"mov\", \"jpg\", \"jpeg\", \"png\"])","    if uploaded_file is not None:","        # S3의 lambda-input 폴더에 파일 저장","        input_key = f\"lambda-input/{uploaded_file.name}\"","        s3.upload_fileobj(uploaded_file, bucket_name, input_key)","        st.write(\"File uploaded successfully to S3\")","","        # 결과 가져오기 버튼","        if st.button(\"Get Result\"):","            result_key = f\"lambda-output/{uploaded_file.name}.json\"","            try:","                result_obj = s3.get_object(Bucket=bucket_name, Key=result_key)","                result = json.loads(result_obj['Body'].read().decode())","                st.write(\"Inference Result:\", result)","            except Exception as e:","                st.write(\"Result not available yet, please try again later.\")","else:","    # 기본 Service 페이지 콘텐츠","    st.write(\"# Services\")","    st.write(\"Add your services introduction content here.\")",""],"id":1}]]},"ace":{"folds":[],"scrolltop":15,"scrollleft":0,"selection":{"start":{"row":62,"column":0},"end":{"row":62,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1716481904673,"hash":"29ba20815d8b884542432e1f3b173a19743934c9"}